# Management Network User Guide

## Introduction

The intent for the this documentation is to help install and manage Aruba, Dell, and Mellanox network switches in a CSM install.

The HPE Cray recommended way of configuring the network is via the CANU tool, hence this guide will not go to level of detail of how to configure each switch via CLI in the topology, rather give you helpful examples of how to configure/use features generated by CANU to provide administrators easy way to customize their installation.

Also included in this guide are our current documented and supported network scenarios.
Please do note that not every configuration option is covered here and for any configuration outside of the scope of this document; You should refer to the official Aruba user manuals.

This document is intended for network administrators and support personnel.
__________________________________
The display and command line illustrated in this document are examples and might not exactly match your particular environment. The switch and accessory drawings in this document are for illustration only, and may not exactly match your installed products.
__________________________________

### Switch configuration guides

#### Switch config states

To check what state the switches are see the [upgrade](./management_network//upgrade.md) page.

- 1.0 Config: Non generated switch configs.
- 1.0 Preconfig: CANU generated configs for 1.0
- 1.2 Config: CANU generated configs for 1.2


#### Starting points

- Current switch configs are not generated and need to upgrade to generated configs.
  - This can either be 1.0 generated or 1.2 generated.
  - use the [upgrade](./management_network/upgrade.md) page.
- Current switch configs are generated and need to go to 1.2
  - [1.0 (Preconfig) to 1.2](./management_network/1.0_to_1.2_upgrade.md)
- Switches have no config on them
  - [Fresh Install](.management_network/fresh_install.md)
- Reinstalling the same CSM version.
  - [Re-install](./management_network/reinstall.md)
- New hardware was added to the system.
  - [Added Hardware](./management_network/added_hardware.md)
- Switch failed and needs to be replaced.
  - [Replace Switch](./management_network/replace_switch.md)

### User guides

The user guides contain information such as are generic configuration examples, explanation of currently used technologies, topology maps and summary of the network design used in the CSM management network.

- [Aruba](aruba/index.md)
- [Dell](dell/index.md)
- [Mellanox](mellanox/index.md)

### CANU

CANU (CSM Automatic Network Utility) is the tool used to generate/validate/test the Shasta management network.

Documentation for CANU can be found at:

 https://github.com/Cray-HPE/canu

### Useful pages

- [Collect data](collect_data.md)
  - Input data needed to generate switch configs.
- [Cable Management Network Servers](../../../install/cable_management_network_servers.md)
  - Shows how servers in CSM should be cabled.
- [SHCD HMN Tab/HMN Connections Rules](../../../install/shcd_hmn_connections_rules.md)
  - Shows how the HMN tab on the SHCD should be formatted.
- [SHCD Connection Rules](../../../install/shcd_hmn_connections_rules.md)
  - Shows how the all tabs on the SHCD should be formatted EXCEPT the HMN tab.
- [Backup custom config](backup_custom_config.md)
  - Shows users how to backup configuration that's custom to their system, this include site connections and credentials.
- [Config management](config_management.md)
  - Shows users how to save a running config to the switch for backup purposes or to switch between different switch configs.
- [Validate switch config](validate_switch_configs.md)
  - Compares the configuration on a running system to what is generated.
- [Wipe management switches](wipe_mgmt_switches.md)
  - Erase the switch configuration, this is useful for fresh installs.
- [Generate switch configs](generate_switch_configs.md)
  - Generate configurations for all management switches.
- [Manual switch configs](manual_switch_config.md)
  - Some configuration needs to be done manually (authentication/SNMP).
- [Validate SHCD](validate_shcd.md)
  - Validate the SHCD against the CSM network architecture.

### Products Supported

This release applies to the following product models:

- Aruba 8320 Switch Series
- Aruba 8325 Switch Series
- Aruba 8360 Switch Series
- Aruba 6300 Switch Series
- Mellanox SN2100 Switch Series
- Mellanox SN2700 Switch Series
- Dell S3048-ON Switch Series
- Dell S4148T-ON Switch Series
- Dell S4148F-ON Switch Series

### Architecture and naming conventions

- Can be found in the network model model.
https://github.com/Cray-HPE/canu/blob/main/network_modeling/models/cray-network-architecture.yaml

### Minimum software version requirements

- [Network Firmware](firmware/update_management_network_firmware.md)

### Enhancements

This section lists enhancements added to this version of Shasta management network.

Software enhancements are listed in reverse-chronological order, with the newest on the top of the list.

Unless otherwise noted, each network version listed includes all enhancements added in earlier versions.

**Version 1.2:**

<table>
<td>
<pre>
Spanning-tree
</td>
</pre>
<td>
<pre>
In the Shasta management network version 1.2 Spanning-tree configuration 
is changing from RPVST (RSTP) to MSTP to allow for better vendor interoperability
and simplified Spanning-tree configuration. New default configuration: 

- Spanning-tree BPDU guard is removed from NCN LAG ports
- Spanning-tree BPDU filter is removed
- Spanning-tree admin-edge port settings are retained for allowing quicker PXE boot
- Spanning-tree instance is tied to default (no longer multiple instances or per vlan) 
- Spanning-tree MSTP configuration name and revision in all configurations generated by Canu are set

as: ***name*** cray ***version*** 2
</td>
</pre>
</table>

### Fixes

<table>
<td>
<pre>
....
</td>
</pre>
<td>
<pre>
....
</td>
</pre>
</table>

### Issues and Workarounds

The following are known open issues with this branch of the software.

The Symptom statement describes what a user might experience if this is seen on the network. The Scenario statement provides additional environment details and trigger summaries. When available, the Workaround
statement provides a workaround to the issue.

<table>
<td>
<pre>
No currently known issues
</pre>
</td>
<td>
<pre>
N/A
</td>
</pre>
</table>

### Security Bulletin Subscription Service

You can sign up at [click here](https://support.hpe.com/connect/s/?language=en_US)
to initiate a subscription to receive future HPE Security Bulletin alerts via email.

A Security Bulletin is the published notification of security vulnerabilities and is the only communication
vehicle for security vulnerabilities.

* Fixes for security vulnerabilities are not documented in manuals, release notes, or other forms of product
documentation
* A Security Bulletin is released when all vulnerable products still in support life have publicly available
images that contain the fix for the security vulnerability