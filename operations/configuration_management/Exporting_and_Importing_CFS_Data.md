# Exporting and Importing CFS Data

- [Prerequisites](#prerequisites)
- [Export](#export)
- [Import](#import)

## Prerequisites

- Ensure that the `cray` command line interface (CLI) is authenticated and configured to talk to system management services.
  - See [Configure the Cray CLI](../configure_cray_cli.md).
- In order to use the automated procedures, the latest CSM documentation RPM must be installed on the node where the procedure is being performed.
  - See [Check for latest documentation](../../update_product_stream/README.md#check-for-latest-documentation).

## Export

1. (`ncn-mw#`) Run the following script to create a backup of the current CFS components, configurations, options, and sessions.

   ```bash
   /usr/share/doc/csm/scripts/operations/system_recovery/export_cfs_data.sh
   ```

   Expected output resembles the following:

   ```text
   Exporting CFS components...
   Exporting CFS configurations...
   Exporting CFS options...
   Exporting CFS sessions...
   Creating compressed archive of exported data...
   SUCCESS: CFS data stored in file: /tmp/cfs-export-20230410170613-Tg0nap.tgz
   ```

1. Copy the archive file it outputs to a safe location.

## Import

1. Copy the file generated by the export script on the node where the import procedure is being performed.

1. Expand the archive file and use its contents to manually recreate any desired CFS state.
